<tal:block xmlns:tal="http://xml.zope.org/namespaces/tal"
           xmlns:ajax="http://namesspaces.bluedynamics.eu/ajax"
           xmlns:i18n="http://xml.zope.org/namespaces/i18n"
           i18n:domain="cone.ugm"
           omit-tag="True">

  <div class="columnlisting ${context.batchname}sensitiv"
       ajax:bind="batchclicked"
       ajax:target="${context.nodeurl}"
       ajax:action="${context.ajax_action}:.${context.batchname}sensitiv:replace">

    <tal:batch replace="structure context.batch" />

    <div class="columnsorting btn-group">
      <div class="btn btn-default" disabled="disabled">
        <span i18n:translate="sort_by">Sorting</span>:
      </div>
      <tal:sortheader repeat="header context.sortheader">
        <button id="${header['id']}"
             class="${header['default'] and 'default' or None} btn btn-default ">
          <span class="columnsorticon"></span>
          <span tal:content="header['name']">name</span>
        </button>
      </tal:sortheader>
    </div>

    <div class="columnitems"
         tal:attributes="class 'columnitems ' + context.css">
      <ul class="${context.slot}">
        <tal:item repeat="item context.items">
          <li ajax:target="${item['target']}"
              tal:define="current_item item['current'] and 'selected' or '';
                          first_item repeat.item.start and 'first_item' or '';
                          item_class '%s %s' %(current_item, first_item)"
              tal:attributes="class item_class">
            <div class="head li_trigger"
                 tal:content="structure item['content']">head</div>
            <div class="actions">
              <tal:action repeat="action item['actions']">
                <tal:enabled condition="action['enabled']">
                  <a href=""
                     title="${action['title']}"
                     class="${'action %s enabled' % action['id']}"
                     ajax:target="${action['target']}">&nbsp;</a>
                </tal:enabled>
                <tal:disabled condition="not action['enabled']">
                  <a href=""
                     title="${action['title']}"
                     class="${'action %s_disabled' % action['id']}"
                     ajax:target="${action['target']}">&nbsp;</a>
                </tal:disabled>
              </tal:action>
            </div>
            <div style="clear: both;"></div>
          </li>
        </tal:item>
      </ul>
    </div>

  </div>
</tal:block>
