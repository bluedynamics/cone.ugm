<tal:block xmlns:tal="http://xml.zope.org/namespaces/tal"
           xmlns:ajax="http://namesspaces.bluedynamics.eu/ajax"
           xmlns:i18n="http://xml.zope.org/namespaces/i18n"
           i18n:domain="cone.ugm"
           omit-tag="True">
  <div class="inoutwidget"
       ajax:bind="inoutfilterchanged"
       ajax:action="inoutlisting:.inoutwidget:replace">

    <div class="inout_column_filter left_column_filter">
      <strong i18n:translate="available">Available</strong>
      <input type="text"
             name="left_filter"
             class="form-control ${'' if context.left_filter_term else 'empty_filter'}"
             ajax:target="${context.left_filter_target}"
             ajax:event="inoutfilterchanged:.inoutwidget"
             tal:attributes="value context.left_filter_value">
    </div>

    <div class="inout_column_filter right_column_filter">
      <strong i18n:translate="recent">Recent</strong>
      <input type="text"
             name="right_filter"
             class="form-control ${'' if context.right_filter_term else 'empty_filter'}"
             ajax:target="${context.right_filter_target}"
             ajax:event="inoutfilterchanged:.inoutwidget"
             tal:attributes="value context.right_filter_value">
    </div>

    <div class="inoutlisting"
         tal:define="display_control_buttons context.display_control_buttons">

      <ul class="list-group inoutleftlisting">

        <tal:item repeat="item context.available_items">
          <li class="list-group-item ${item['current'] and 'selected' or ''}"
              ajax:target="${item['target']}">

            <div class="cols li_trigger"
                 tal:content="structure item['content']">cols</div>

            <div class="actions">
              <tal:action repeat="action item['actions']">
                <tal:enabled condition="action['enabled']">
                  <a href=""
                     title="${action['title']}"
                     class="${'action %s enabled' % action['id']}"
                     ajax:target="${action['target']}">&nbsp;</a>
                </tal:enabled>
                <tal:disabled condition="not action['enabled']">
                  <a href=""
                     title="${action['title']}"
                     class="${'action %s hidden' % action['id']}"
                     ajax:target="${action['target']}">&nbsp;</a>
                </tal:disabled>
              </tal:action>
            </div>

            <div class="clearfix"></div>

          </li>
        </tal:item>

      </ul>

      <div class="inoutbuttons"
           tal:condition="display_control_buttons">
        <button class="btn btn-default ion-arrow-right-c inout_add_item" />
        <button class="btn btn-default ion-arrow-left-c inout_remove_item" />
      </div>

      <ul class="list-group inoutrightlisting">

        <tal:item repeat="item context.selected_items">
          <li class="list-group-item ${item['current'] and 'selected' or ''}"
              ajax:target="${item['target']}">

            <div class="cols li_trigger"
                 tal:content="structure item['content']">cols</div>

            <div class="actions">
              <tal:action repeat="action item['actions']">
                <tal:enabled condition="action['enabled']">
                  <a href=""
                     title="${action['title']}"
                     class="${'action %s enabled' % action['id']}"
                     ajax:target="${action['target']}">&nbsp;</a>
                </tal:enabled>
                <tal:disabled condition="not action['enabled']">
                  <a href=""
                     title="${action['title']}"
                     class="${'action %s hidden' % action['id']}"
                     ajax:target="${action['target']}">&nbsp;</a>
                </tal:disabled>
              </tal:action>
            </div>

            <div class="clearfix"></div>

          </li>
        </tal:item>

      </ul>
    </div>

  </div>
</tal:block>